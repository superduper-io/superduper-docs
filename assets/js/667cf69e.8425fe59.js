"use strict";(self.webpackChunknewdocs=self.webpackChunknewdocs||[]).push([[2575],{5265:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>r,default:()=>p,frontMatter:()=>i,metadata:()=>s,toc:()=>d});var a=t(4848),o=t(8453);const i={},r="Connect API",s={id:"connect_api/overview",title:"Connect API",description:"Connecting to your data is the first step in any Superduper program in Python.",source:"@site/docs/connect_api/overview.md",sourceDirName:"connect_api",slug:"/connect_api/overview",permalink:"/docs/connect_api/overview",draft:!1,unlisted:!1,editUrl:"https://github.com/superduper-io/superduper/edit/main/docs/docs/connect_api/overview.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Reusable Superduper applications and templates",permalink:"/docs/tutorials/application_template"},next:{title:"Overview",permalink:"/docs/apply_api/overview"}},c={},d=[{value:"Basic usage",id:"basic-usage",level:2},{value:"Fine grained connection",id:"fine-grained-connection",level:2},{value:"Using a config file",id:"using-a-config-file",level:2},{value:"Using environment variables",id:"using-environment-variables",level:2}];function l(e){const n={admonition:"admonition",code:"code",h1:"h1",h2:"h2",p:"p",pre:"pre",...(0,o.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.h1,{id:"connect-api",children:"Connect API"}),"\n",(0,a.jsx)(n.p,{children:"Connecting to your data is the first step in any Superduper program in Python."}),"\n",(0,a.jsx)(n.h2,{id:"basic-usage",children:"Basic usage"}),"\n",(0,a.jsx)(n.p,{children:"Connecting to your data with Superduper is possible with a single command:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:"from superduper import superduper\n\ndb = superduper('<db_type>://<location>')\n"})}),"\n",(0,a.jsxs)(n.p,{children:["For example to connect to the ",(0,a.jsx)(n.code,{children:"test_db"})," database in a MongoDB instance running on ",(0,a.jsx)(n.code,{children:"localhost"})," do:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:"db = superduper('mongodb://localhost:27017/test_db')\n"})}),"\n",(0,a.jsxs)(n.admonition,{type:"important",children:[(0,a.jsxs)(n.p,{children:["The object ",(0,a.jsx)(n.code,{children:"db"}),", returned by this command is a ",(0,a.jsx)(n.code,{children:"superduper.base.datalayer.Datalayer"})," instance,\nwhich contains all functionality needed to interact with your data with Superduper."]}),(0,a.jsxs)(n.p,{children:["In the remainder of the documentation, ",(0,a.jsx)(n.code,{children:"db"})," is referred to without additional explanation."]})]}),"\n",(0,a.jsx)(n.h2,{id:"fine-grained-connection",children:"Fine grained connection"}),"\n",(0,a.jsxs)(n.p,{children:["More specific connection parameters may be passed as keyword attributes. The possible\nparameters are defined in the dataclass ",(0,a.jsx)(n.code,{children:"superduper.base.config.Config"}),", which also\nholds the default values for all Superduper configurations. For example, to use\nan alternative metadata store (where ",(0,a.jsx)(n.code,{children:"Component"})," metadata and parameters are stored), use:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:"db = superduper('mongodb://localhost:27017/test_db', metadata='mongodb://localhost:27017/meta_db')\n"})}),"\n",(0,a.jsx)(n.h2,{id:"using-a-config-file",children:"Using a config file"}),"\n",(0,a.jsxs)(n.p,{children:["To reuse configurations in multiple programs and to separate configuration from Python code, developers\nmay use a configuration file in ",(0,a.jsx)(n.code,{children:".yaml"})," format.\nTo specify a configuration file, developers must set the ",(0,a.jsx)(n.code,{children:"SUPERDUPER_CONFIG=<path-to-config>.yaml"})," environment variable.\nHere is an example:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:"# Where large data blobs/ files are saved\nartifact_store: filesystem://<path-to-artifact-store>\n\n# How to encode binary data\nbytes_encoding: Bytes\n# bytes_encoding: Base64\n\n# The base database you would like to connect to\ndata_backend: <databackend-uri>\n\n# Settings for randomly assigning train/valid folds\nfold_probability: 0.05\n\n# Where lance indexes will be saved\nlance_home: .superduper/vector_indices\n\n# Log level to be shown to stdout\nlog_level: INFO\nlogging_type: SYSTEM\n\n# Database to save meta-data in (defaults to `data_backend`)\nmetadata_store: null\n\n# Settings for failed API requests\nretries:\n  stop_after_attempt: 2\n  wait_max: 10.0\n  wait_min: 4.0\n  wait_multiplier: 1.0\n"})}),"\n",(0,a.jsxs)(n.p,{children:["Once the ",(0,a.jsx)(n.code,{children:"SUPERDUPER_CONFIG"})," variable has been set, no parameters are required to build the connection:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:"db = superduper()\n"})}),"\n",(0,a.jsx)(n.h2,{id:"using-environment-variables",children:"Using environment variables"}),"\n",(0,a.jsx)(n.p,{children:"In some instances it may be more convenient to work with environment variables. These\nmay be used as alternative or overrides to configurations in the config file. For\nexample to change the connection to primary data do:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"$ export SUPERDUPER_DATA_BACKEND='mongodb://localhost:27018/documents'\n"})})]})}function p(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(l,{...e})}):l(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>s});var a=t(6540);const o={},i=a.createContext(o);function r(e){const n=a.useContext(i);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),a.createElement(i.Provider,{value:n},e.children)}}}]);